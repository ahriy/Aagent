# 🔧 多Token配置指南

## 💡 为什么需要多Token？

1. **速度提升**: 多个Token可以并发请求，大幅提升数据收集速度
2. **智能切换**: 当某个Token遇到API限制时，自动切换到其他Token
3. **高可用性**: 降低单点故障风险，提高程序稳定性

## ⚙️ 配置方法

### 在.env文件中配置多个Token:

```bash
# 方式1: 多个Token（推荐）
TUSHARE_TOKENS=token1,token2,token3

# 方式2: 单个Token（兼容旧版本）  
TUSHARE_TOKEN=single_token
```

### Token购买建议:

- **最佳配置**: 3-5个Token，可以达到很好的速度提升
- **最少配置**: 2个Token，已经有明显的速度改善
- **单Token**: 仍然可用，但速度较慢

## 🚀 性能提升效果

| Token数量 | 预期速度提升 | 适用场景 |
|----------|-------------|---------|
| 1个      | 基准速度     | 预算有限 |
| 2个      | 50-80%提升   | 小规模使用 |
| 3个      | 100-150%提升 | 推荐配置 |
| 5个      | 200-300%提升 | 大规模数据收集 |

## 🔧 程序特性

### 智能Token管理:
- ✅ 自动检测API限制并切换Token
- ✅ 指数退避重试机制
- ✅ 实时统计成功率和使用情况
- ✅ 错误恢复和断点续传

### 监控信息:
程序运行时会显示:
- 当前使用的Token编号
- 各Token的成功率统计
- API请求总数和成功数
- 智能切换日志

## 📝 配置步骤

1. **购买Token**: 在 https://tushare.pro/ 购买多个Token
2. **配置文件**: 在.env文件中添加Token配置
3. **启动程序**: 运行main.py，程序会自动使用多Token
4. **监控运行**: 观察日志中的Token切换信息

## 🛠️ 故障排除

### 常见问题:

1. **Token无效**: 检查Token是否正确，是否已激活
2. **网络问题**: 确保网络连接稳定
3. **API限制**: 正常现象，程序会自动处理
4. **配置错误**: 检查.env文件格式是否正确

### 调试技巧:

- 观察程序输出的Token切换日志
- 检查成功率统计，正常应该在90%以上
- 如果某个Token一直失败，可能需要检查Token状态

## 🎯 使用建议

1. **分时段运行**: 避开API高峰期（工作日9-17点）
2. **定期监控**: 观察Token使用情况和成功率
3. **备用Token**: 保留1-2个Token作为备用
4. **合理配置**: 根据实际需求选择Token数量

通过多Token配置，您的数据收集速度将得到显著提升！🚀 